caption: addmarkers
created: 20240713080802072
modified: 20241009104522293
order: 51
tags: leaflet demo doc
title: demo/leaflet/filter/addmarkers
type: text/vnd.tiddlywiki

!! addmarkers

Take coordinates in tiddlers and generate a map layer with markers which is equivalent with R function [ext[addMarkers|https://rstudio.github.io/leaflet/reference/map-layers.html]].

!! Syntax

```
[addmarkers[]]
```

|purpose |generate a map layer with tiddler |
|input	|a selection of titles |
|suffix |the argument names, see below for details |
|parameter|	argument values, see below for details |
|output |json string for markers |


The `addmarkers` operator uses multiple arguments with name and values to specify markers:

```
[addmarkers:<argument name>[<argument values>]]
```

* `argument name`: a comma delimited list of argument names which has the same length of `argument values`
* `argument values`: a comma delimited list of argument values to match with the same order of `argument names`

The supported arguments include

* `point` using format `<latitude>,<longitude>` with default field `point`.
* `longitude` and `latitude` with default fields `longitude` and `latitude`, respectively.
* `popup` for a viewtemplate of marker popups.

!! Example


!!! Marker coordinates

Field specified by argumwent `point` is used firstlym, and then fields specified by arguments `longitude` and `latitude`


Use field `point` as coordinates if missing argument `point`


<<wikitext-example src:"""<$htmlwidgets type="leaflet" filter="[addtiles[]] [tag[point]addmarkers[]] +[leaflet[]]" />""">>


Alternatively, the a field can be specified with argument `point`

<<wikitext-example src:"""<$htmlwidgets type="leaflet" filter="[addtiles[]] [tag[point]addmarkers:point[point]] +[leaflet[]]" />""">>


Use fields `longitude` and `latitude` as coordinates if missing arguments `longitude` and `latitude`

<<wikitext-example src:"""<$htmlwidgets type="leaflet" filter="[addtiles[]] [tag[coordinate]addmarkers[]] +[leaflet[]]" />""">>

Alternatively, the fields can be specified with arguments `longitude` and `latitude`

<<wikitext-example src:"""<$htmlwidgets type="leaflet" filter="[addtiles[]] [tag[coordinate]addmarkers:longitude,latitude[longitude],[latitude]] +[leaflet[]]" />""">>

The orders of argument names and values should be matched. The example below will be renderred as the same map.

<<wikitext-example src:"""<$htmlwidgets type="leaflet" filter="[addtiles[]] [tag[coordinate]addmarkers:latitude,longitude[latitude],[longitude]] +[leaflet[]]" />""">>



!!! Popup

In default, the tiddler title and text if not empty are displayed in the popup.

<<wikitext-example src:"""<$htmlwidgets type="leaflet" filter="[addtiles[]] [tag[point]addmarkers[]] +[leaflet[]]" />""">>


Alternatively, popup is renderred using a viewtemplate specified by argument `popup` and if it exists, e.g. [[template/leaflet/popup]].

<<wikitext-example src:"""<$htmlwidgets type="leaflet" filter="[addtiles[]] [tag[point]addmarkers:popup[template/leaflet/popup]] +[leaflet[]]" />""">>


